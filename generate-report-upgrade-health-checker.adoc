---
sidebar: sidebar
permalink: generate-report-upgrade-health-checker.html
keywords: upgrade, health, checker
summary: ""
---
= Generate upgrade plan with Upgrade Health Checker
:hardbreaks:
:icons: font
:linkattrs:
:imagesdir: ./media/

[.lead]
You can use Upgrade Health Checker to generate an update plan for a single or multiple ONTAP clusters.

.Steps

. Set the execute permission on the binary before running it the first time:
+
[source,cli]
----
chmod +x uhc
----
+
NOTE: Upgrade Health Checker is a self-contained package and will need to unpack itself before executing. This can take a few seconds.

. Before completing a full run of Upgrade Health Checker, perform a comprehensive check to ensure the tool can connect to the cluster and required endpoints:
+
[source,cli]
----
./uhc --test all
----
+
The comprehensive check ensures the virtual machine hosting Upgrade Health Checker has:
+
** Connectivity to the ONTAP cluster IP address through HTTPS
** Connectivity to the telemetry endpoint (https://support.netapp.com/) through HTTPS
** Connectivity to the auto-update endpoints (https://api.uhc.netapp.com and https://gql.aiq.netapp.com) through HTTPS
** At least 4 GB of available `/tmp` space

. (Optional) If you want to use a configuration file to store parameters, rename the `config.yaml.example` file located in the same location you downloaded the binary to `config.yaml`.
+
Here is an example config.yaml file:
+
----
# Application Configuration
APP:
  RUNS_PATH: "/opt/uhc/runs"

# Cluster Credentials
CLUSTER:
  IP: "x.x.x.x"
  USERNAME: "admin"
  PASSWORD: "xyz"
  TARGET_ONTAP_VERSION: ""  # Optional: Specify target ONTAP version (e.g., "9.16.1" or "current" to keep existing version). Leave empty to prompt user.
  ACCEPT_EULA: false  # Optional: Set to true to accept EULA through config. If false/empty, user will be prompted interactively.
----


. Run Upgrade Health Checker by entering the ONTAP version you want to upgrade to and accepting the EULA, including additional parameters as needed.
+
NOTE: The EULA is a multi-page document. Enter `all` to see the entire document at once and enter `y` to accept it.
+
After the AutoSupport log is downloaded for a cluster, processing generally takes one to two minutes depending on the number of cluster nodes. Because different ONTAP software versions handle AutoSupport collection differently, each Upgrade Health Checker run depends on the current load of the cluster and the current ONTAP version.

.. Familiarize yourself with the available Upgrade Health Checker commands and parameters by running the help command:
+
[source,cli]
----
./uhc --help
----

.. (Optional) Specify a custom configuration file path and run path to streamline your workflow.

** To specify a custom config.yaml file path, use the following parameter:
+
[source,cli]
----
--config-path /path/to/config.yaml
----
+
If you do not specify a custom config.yaml file path, the default path will be `./config.yaml`.

** To specify a custom run path, use the following parameter:
+
[source,cli]
----
--runs-path /path/to/output/<cluster-name>/
----
+
*BEST PRACTICE*: Create a custom output directory for each cluster to organize your reports and logs effectively.
+
You can also specify the run path in the config.yaml file. If you do not specify a run path, the default path will be `./runs/<cluster-name>/`. The priority for specifying a run path is as follows: CLI parameter > config.yaml > default path.

. After Upgrade Health Checker completes its checks, navigate to the `runs` folder to view the upgrade plan and cluster report.
+``
NOTE: Each execution of the program is a "unique run" and will have all the associated data, logs and results in the associated `runs` folder.

. Open the report file (named `<cluster-name>_<YYYYMMDDHHMMSS>.html`) in a web browser to view the report. If you are running it on a remote host, first download the report file to a machine where you can view the report on a web browser.
+
The log path and report path are as follows:

** Log Path: `<output-path>/<unique-run-dir>/<cluster-name>/logs`
** Report Path: `<output-path>/<unique-run-dir>/<cluster-name>/results/<cluster-name>_<YYYYMMDDHHMMSS>.html`

